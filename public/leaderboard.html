<!DOCTYPE html>
<html lang="en">

<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Leaderboard</title>

<!-- Bootstrap -->
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">

<!-- My Table -->
<link rel="stylesheet" href="css/style.css" />

<meta property="og:title" content="Fluid â€” Animated Coming Soon Template" />
<meta property="og:type" content="website" />
<meta property="og:image" content="images/end.gif" />

<script src="/cdn-cgi/apps/head/-mEFVS8y7qx5pVzWHQTCQu5gnVM.js"></script><link rel="stylesheet" href="css/app.min.css" />

<!-- My JS -->
<!-- <script src="js/leaderboard.js"></script> -->
</head>
<body onload = "startFunction()">

  <script>
    function startFunction() {
      let el = document.getElementById("tableBody");
      var newHTML = ''; //The Variable for the HTML I'm About to Add

      const { Client } = require("pg");

      //Connects to the PostgreSQL database
      const con = new Client({
      connectionString: process.env.DATABASE_URL,
      ssl: true
      });

      con.connect(err => {
      if (err) console.error("Connection error", err.stack)
      })

      for (var i = 1; i < 11; i++) {
      newHTML += '<tr><th scope = "row">' + i + '</th><td>';
      con.query(`SELECT * FROM allTimeLeaderboard WHERE position = ${i}`, (err, rows) => {
      rows = rows['rows'];
      let username = rows[0].username;
      newHTML += '' + username + '</td><td>';
      let score = rows[0].score;
      newHTML += '' + score + '</td><td>';
      let grade = rows[0].grade;
      newHTML += '' + grade + '</td></tr>'
      });
      }

      //Adding in the table rows
      console.log("New HTML is " + newHTML);
      el.innerHTML = newHTML;
    } 
  </script>

<div class="animation anim-dark" data-aos="slide-effect-2">
<div class="wrapper animation-inner">
<div class="background ending-gif overlay">
</div>

<div class="content-section d-flex justify-content-center align-items-center">
  <div class="v-lines" style = "color: white">
  <div class="vline-1">LMAO ANIMATIONS</div>
  <div class="vline-2">
      <img src = "images/schwartz.png">
  </div>
  <div class="vline-3">TAKE MULTIVAR</div>
  <div class="vline-4">THERE'S A WONDERFUL COURSE CALLED COGO</div>
  </div>

  <div class="container">
          <table class="table table-hover">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">Username</th>
                <th scope="col">Score</th>
                <th scope = "col">Grade</th>
              </tr>
            </thead>
            <tbody id = "tableBody"> </tbody>
          </table>
  </div>
</div>

<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script src="js/app.min.js"></script>

</body>
</html>