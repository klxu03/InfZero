<!DOCTYPE html>
<html lang="en">

<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Leaderboard</title>

<!-- Bootstrap -->
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">

<!-- My Table -->
<link rel="stylesheet" href="css/style.css" />

<meta property="og:title" content="Fluid â€” Animated Coming Soon Template" />
<meta property="og:type" content="website" />
<meta property="og:image" content="images/end.gif" />

<script src="/cdn-cgi/apps/head/-mEFVS8y7qx5pVzWHQTCQu5gnVM.js"></script><link rel="stylesheet" href="css/app.min.css" />
</head>
<body>
<div class="animation anim-dark" data-aos="slide-effect-2">
<div class="wrapper animation-inner">
<div class="background ending-gif overlay">
</div>

<div class="content-section d-flex justify-content-center align-items-center">
<div class="v-lines" style = "color: white">
<div class="vline-1">LMAO ANIMATIONS</div>
<div class="vline-2">
    <img src = "images/schwartz.png">
</div>
<div class="vline-3">TAKE MULTIVAR</div>
<div class="vline-4">THERE'S A WONDERFUL COURSE CALLED COGO</div>
</div>

<div class="container">
        <table class="table table-hover">
                <thead>
                  <tr>
                    <th scope="col">#</th>
                    <th scope="col">Username</th>
                    <th scope="col">Score</th>
                    <th scope = "col">Grade</th>
                  </tr>
                </thead>
                <tbody id = "tableBody">
                  <tr>
                    <th scope="row">1</th>
                    <td>Mark</td>
                    <td>Otto</td>
                    <td>11</td>
                  </tr>
                  <tr>
                    <th scope="row">2</th>
                    <td>Jacob</td>
                    <td>Thornton</td>
                    <td>11</td>
                  </tr>
                  <tr>
                    <th scope="row">3</th>
                    <td colspan="2">Larry the Bird</td>
                    <td>11</td>
                    <tr>
                            <th scope="row">4</th>
                            <td>Jacob</td>
                            <td>Thornton</td>
                            <td>11</td>
                            </tr>
                  </tr>
                  <tr>
                        <th scope="row">5</th>
                        <td>Jacob</td>
                        <td>Thornton</td>
                        <td>11</td>
                        </tr>
                        <tr>
                            <th scope="row">6</th>
                            <td>Jacob</td>
                            <td>Thornton</td>
                            <td>11</td>
                            </tr>
                            <tr>
                    <th scope="row">7</th>
                    <td>Jacob</td>
                    <td>Thornton</td>
                    <td>11</td>
                    </tr>
                    <tr>
                <th scope="row">8</th>
                <td>Jacob</td>
                <td>Thornton</td>
                <td>11</td>
                </tr>
                <tr>
        <th scope="row">9</th>
        <td>Jacob</td>
        <td>Thornton</td>
        <td>11</td>
        </tr>
                <tr>
                <th scope="row">10</th>
                <td>Jacob</td>
                <td>Thornton</td>
                <td>11</td>
                </tr>
                </tbody>
              </table>
</div>
</div>

<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script src="js/app.min.js"></script>

<script>

  //Pseudocode for dynamic html
  /* element
  <table id="tbody"></table>
  let el = document.getElementById("tbody")
  for entry in arr
  html = "<tr><td>entry.name</td><td>entry.score</td></tr>"
  el.innerHTML = el.innerHTML + html */

  //This is the Element for inserting things into the Table Body
  let el = document.getElementById("tableBody");
  var html = ''; //The Variable for the HTML I'm About to Add

  const { Client } = require("pg");

  //Connects to the PostgreSQL database
  const con = new Client({
    connectionString: process.env.DATABASE_URL,
    ssl: true
  });

  con.connect(err => {
    if (err) console.error("Connection error", err.stack)
  })

  for (var i = 1; i < 11; i++) {
      html += '<tr><th scope = "row">' + i + '</th><td>';
      con.query(`SELECT * FROM allTimeLeaderboard WHERE position = ${i}`, (err, rows) => {
        rows = rows['rows'];
        let username = rows[0].username;
        html += '' + username + '</td><td>';
        let score = rows[0].score;
        html += '' + score + '</td><td>';
        let grade = rows[0].grade;
        html += '' + grade + '</td></tr>'
      });
  }
  
  //Adding in the table rows
  el.innerHTML = el.innerHTML + html;
</script>

</body>
</html>